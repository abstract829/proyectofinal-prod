"use strict";(self.webpackChunkproyecto_final=self.webpackChunkproyecto_final||[]).push([[118],{1118:($,p,c)=>{c.r(p),c.d(p,{ForoModule:()=>L});var d=c(8583),u=c(8663),h=c(2359),t=c(639),_=c(2340),b=c(1841);let f=(()=>{class e{constructor(o){this.http=o,this.url=_.N.url}getForos(){return this.http.get(`${this.url}/foro/get`)}getForoById(o){return this.http.get(`${this.url}/foro/get/${o}`)}getComentariosByForoId(o){return this.http.get(`${this.url}/foro/getcomentarios/${o}`)}addComentario(o){return this.http.post(`${this.url}/foro/addcomentario/`,o)}delComentario(o){return this.http.delete(`${this.url}/foro/delcomentario/${o}`)}addForo(o){return this.http.post(`${this.url}/foro/addforo/`,o)}delForo(o){return this.http.delete(`${this.url}/foro/delforo/${o}`)}addLike(o,n){return this.http.post(`${this.url}/foro/addlike`,{iduser:o,idcomentario:n})}getLikes(o){return this.http.get(`${this.url}/foro/likes/${o}`)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(b.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=c(7556),a=c(665);let C=(()=>{class e{constructor(o){this.router=o}ngOnInit(){}onClickForo(){this.router.navigateByUrl(`/foro/info/${this.foro.id}`)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-foro"]],inputs:{foro:"foro"},decls:7,vars:4,consts:[[1,"card","mb-3",3,"click"],[1,"card-body"],[1,"card-title"],[1,"mt-5"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return n.onClickForo()}),t.TgZ(1,"div",1),t.TgZ(2,"h5",2),t._uU(3),t.qZA(),t.TgZ(4,"p",3),t._uU(5),t.ALo(6,"date"),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(3),t.Oqu(n.foro.title),t.xp6(2),t.hij("Publicado el ",t.lcZ(6,2,n.foro.fecha),""))},pipes:[d.uU],styles:["body[_ngcontent-%COMP%]{margin:0 auto;font-family:Helvetica;font-weight:500}.hide[_ngcontent-%COMP%]{display:none}.btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#020024 0%,#4f77fa 0%,#5964f1 50%,rgba(51,103,244,.9444152661) 100%)}.card[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 1fr;grid-gap:5px;width:100%;height:150px;cursor:pointer;background:linear-gradient(90deg,#020024 0%,#f0f0f0 0%,#e4e1e1 50%,rgba(236,236,236,.9444152661) 100%)}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{text-align:left}"]}),e})(),Z=(()=>{class e{transform(o,n=0,i=""){return 0===i.length?o.slice(n,n+4):o.filter(Y=>{const N=Y.title.toLowerCase(),B=i.toLowerCase();return N.includes(B)}).slice(n,n+4)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=t.Yjl({name:"paginacionForo",type:e,pure:!0}),e})();function v(e,r){1&e&&(t.TgZ(0,"div",10),t.TgZ(1,"button",11),t._uU(2,"Crear foro"),t.qZA(),t.qZA())}function F(e,r){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-foro",12),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Q6J("foro",o)}}let T=(()=>{class e{constructor(o,n){this.foroService=o,this.authService=n,this.page=0,this.toBuscar=""}get user(){return this.authService.user}ngOnInit(){this.foroService.getForos().subscribe(o=>{this.foros=o.foros})}nextPage(){this.page+4>this.foros.length||(this.page+=4)}backPage(){this.page>0&&(this.page-=4)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(f),t.Y36(g.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-principal"]],decls:15,vars:7,consts:[[1,"main"],[1,"buscador"],[1,"input-group"],[1,"input-group-text"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["class","addforo",4,"ngIf"],[1,"foro"],[4,"ngFor","ngForOf"],[1,"butons"],[1,"btn","btn-primary",3,"click"],[1,"addforo"],["routerLink","/foro/agregar",1,"btn","btn-primary"],[3,"foro"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"span",3),t._uU(4,"Buscar"),t.qZA(),t.TgZ(5,"input",4),t.NdJ("ngModelChange",function(s){return n.toBuscar=s}),t.qZA(),t.qZA(),t.YNc(6,v,3,0,"div",5),t.qZA(),t.TgZ(7,"div",6),t.YNc(8,F,2,1,"div",7),t.ALo(9,"paginacionForo"),t.qZA(),t.TgZ(10,"div",8),t.TgZ(11,"button",9),t.NdJ("click",function(){return n.backPage()}),t._uU(12,"Anterior"),t.qZA(),t.TgZ(13,"button",9),t.NdJ("click",function(){return n.nextPage()}),t._uU(14,"Siguiente"),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(5),t.Q6J("ngModel",n.toBuscar),t.xp6(1),t.Q6J("ngIf",2!=n.user.tipo_user),t.xp6(2),t.Q6J("ngForOf",t.Dn7(9,3,n.foros,n.page,n.toBuscar)))},directives:[a.Fj,a.JJ,a.On,d.O5,d.sg,u.rH,C],pipes:[Z],styles:["body[_ngcontent-%COMP%]{margin:0 auto;font-family:Helvetica;font-weight:500}.hide[_ngcontent-%COMP%]{display:none}.btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#020024 0%,#4f77fa 0%,#5964f1 50%,rgba(51,103,244,.9444152661) 100%)}.main[_ngcontent-%COMP%]{padding:20px;display:grid;grid-gap:50px;max-width:960px;margin:0 auto 50px}.main[_ngcontent-%COMP%]   .buscador[_ngcontent-%COMP%]{width:100%}.main[_ngcontent-%COMP%]   .buscador[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#020024 0%,#4f77fa 0%,#5964f1 50%,rgba(51,103,244,.9444152661) 100%);margin-top:30px}.butons[_ngcontent-%COMP%]{width:100%;text-align:center}.butons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}"]}),e})();var y=c(8259),l=c.n(y);function O(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){return t.CHM(o),t.oxw().addLike()}),t._uU(1,"Like"),t.qZA()}}function P(e,r){1&e&&(t.TgZ(0,"button",7),t._uU(1,"Liked"),t.qZA())}function M(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(o),t.oxw().delComentario()}),t._uU(1,"Borrar"),t.qZA()}}let k=(()=>{class e{constructor(o,n,i){this.authService=o,this.foroService=n,this.router=i,this.likes=0,this.showLike=!0}get foroId(){return this.comentario.idforo}get logedUser(){return this.authService.user}ngOnInit(){this.authService.getUserById(this.comentario.iduser).subscribe(o=>{this.user=o.user}),this.foroService.getLikes(this.comentario.id).subscribe(o=>{this.likes=o.qt}),this.idforo=this.comentario.idforo,this.foroService.addLike(this.logedUser.id,this.comentario.id).subscribe(o=>{o.ok||(this.showLike=!1)})}delComentario(){this.foroService.delComentario(this.comentario.id).subscribe(o=>{o.ok&&window.location.reload()})}addLike(){this.foroService.addLike(this.logedUser.id,this.comentario.id).subscribe(o=>{this.ngOnInit()})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(g.e),t.Y36(f),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-comentario"]],inputs:{comentario:"comentario"},decls:12,vars:6,consts:[[1,"card","mb-3"],[1,"card-body"],[1,"mt-5"],["class","btn btn-primary like",3,"click",4,"ngIf"],["class","btn btn-primary like","disabled","",4,"ngIf"],["class","btn btn-primary mt-5",3,"click",4,"ngIf"],[1,"btn","btn-primary","like",3,"click"],["disabled","",1,"btn","btn-primary","like"],[1,"btn","btn-primary","mt-5",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"p",2),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.YNc(8,O,2,0,"button",3),t.YNc(9,P,2,0,"button",4),t.qZA(),t.TgZ(10,"div"),t.YNc(11,M,2,0,"button",5),t.qZA(),t.qZA()),2&o&&(t.xp6(3),t.Oqu(n.comentario.comentario),t.xp6(2),t.hij("Comentado por : ",n.user.name,""),t.xp6(2),t.hij("Likes : ",n.likes,""),t.xp6(1),t.Q6J("ngIf",n.showLike),t.xp6(1),t.Q6J("ngIf",!n.showLike),t.xp6(2),t.Q6J("ngIf",n.comentario.iduser==n.logedUser.id))},directives:[d.O5],styles:["body[_ngcontent-%COMP%]{margin:0 auto;font-family:Helvetica;font-weight:500}.hide[_ngcontent-%COMP%]{display:none}.btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#020024 0%,#4f77fa 0%,#5964f1 50%,rgba(51,103,244,.9444152661) 100%)}.card[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 1fr;grid-gap:5px;background:linear-gradient(90deg,#020024 0%,#f0f0f0 0%,#e4e1e1 50%,rgba(236,236,236,.9444152661) 100%)}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{text-align:left}.card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#020024 0%,#4f77fa 0%,#5964f1 50%,rgba(51,103,244,.9444152661) 100%);float:right;margin-right:10px}.card[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]{float:left}"]}),e})();function A(e,r){if(1&e&&t._UZ(0,"img",15),2&e){const o=t.oxw();t.s9C("src",o.user.img,t.LSH)}}function q(e,r){1&e&&t._UZ(0,"img",16)}function x(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(o),t.oxw().delForo()}),t._uU(1,"Eliminar foro"),t.qZA()}}function U(e,r){1&e&&t._UZ(0,"app-comentario",18),2&e&&t.Q6J("comentario",r.$implicit)}let I=(()=>{class e{constructor(o,n,i,s){this.route=o,this.foroService=n,this.authService=i,this.router=s,this.toComentar=""}get logedUser(){return this.authService.user}ngOnInit(){this.route.params.subscribe(({id:o})=>{this.foroService.getForoById(o).subscribe(n=>{this.foro=n.foro,this.authService.getUserById(this.foro.creado_por).subscribe(i=>{this.user=i.user}),this.foroService.getComentariosByForoId(this.foro.id).subscribe(i=>{this.comentarios=i.comentarios})})})}addComentario(){this.foroService.addComentario({iduser:this.logedUser.id,idforo:this.foro.id,comentario:this.toComentar}).subscribe(n=>{n.ok&&this.ngOnInit()})}delForo(){this.foroService.delForo(this.foro.id).subscribe(o=>{o.ok?l().fire("Listo!","Se elimino correctamente el foro!","success"):l().fire("Error!","Hubo un error eliminando el foro!","error")}),setTimeout(()=>{this.router.navigateByUrl("/foro/busqueda")},1e3)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.gz),t.Y36(f),t.Y36(g.e),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-foro-info"]],decls:29,vars:12,consts:[[1,"main","mt-3"],[1,"user"],[1,"mb-3"],["alt","",3,"src",4,"ngIf"],["src","/assets/user.jpg","alt","",4,"ngIf"],[1,"mt-4"],[1,"info"],[1,"title"],[1,"desc"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"comentarios"],[3,"comentario",4,"ngFor","ngForOf"],[1,"addcomentario"],["rows","5",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","mt-3",3,"click"],["alt","",3,"src"],["src","/assets/user.jpg","alt",""],[1,"btn","btn-primary",3,"click"],[3,"comentario"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.qZA(),t.YNc(4,A,1,1,"img",3),t.YNc(5,q,1,0,"img",4),t.TgZ(6,"p",5),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.TgZ(10,"h3"),t._uU(11),t.qZA(),t.qZA(),t.TgZ(12,"div",8),t.TgZ(13,"p"),t._uU(14),t.qZA(),t.qZA(),t.TgZ(15,"p"),t._uU(16),t.ALo(17,"date"),t.qZA(),t.YNc(18,x,2,0,"button",9),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"h3"),t._uU(21,"Comentarios"),t.qZA(),t.YNc(22,U,1,1,"app-comentario",11),t.qZA(),t.TgZ(23,"div",12),t.TgZ(24,"h4"),t._uU(25,"Agrega un comentario"),t.qZA(),t.TgZ(26,"textarea",13),t.NdJ("ngModelChange",function(s){return n.toComentar=s}),t.qZA(),t.TgZ(27,"button",14),t.NdJ("click",function(){return n.addComentario()}),t._uU(28,"Comentar"),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(3),t.Oqu(n.user.name),t.xp6(1),t.Q6J("ngIf",n.user.img),t.xp6(1),t.Q6J("ngIf",!n.user.img),t.xp6(2),t.Oqu(n.user.email),t.xp6(4),t.Oqu(n.foro.title),t.xp6(3),t.Oqu(n.foro.desc),t.xp6(2),t.hij("Publicado en ",t.lcZ(17,10,n.foro.fecha),""),t.xp6(2),t.Q6J("ngIf",n.logedUser.id==n.foro.creado_por),t.xp6(4),t.Q6J("ngForOf",n.comentarios),t.xp6(4),t.Q6J("ngModel",n.toComentar))},directives:[d.O5,d.sg,a.Fj,a.JJ,a.On,k],pipes:[d.uU],styles:["body[_ngcontent-%COMP%]{margin:0 auto;font-family:Helvetica;font-weight:500}.hide[_ngcontent-%COMP%]{display:none}.btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#020024 0%,#4f77fa 0%,#5964f1 50%,rgba(51,103,244,.9444152661) 100%)}.main[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 50px;display:grid;grid-template-columns:1fr 2fr;grid-gap:20px}.main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{grid-column:2/3;background:linear-gradient(90deg,#020024 0%,#f0f0f0 0%,#e4e1e1 50%,rgba(236,236,236,.9444152661) 100%);border-radius:5px;padding:30px}.main[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{grid-column:1/2;background:linear-gradient(90deg,#020024 0%,#f0f0f0 0%,#e4e1e1 50%,rgba(236,236,236,.9444152661) 100%);border-radius:5px;padding:30px;text-align:center}.main[_ngcontent-%COMP%]   .comentarios[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .addcomentario[_ngcontent-%COMP%]{grid-column:1/3}.main[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#020024 0%,#4f77fa 0%,#5964f1 50%,rgba(51,103,244,.9444152661) 100%)}"]}),e})(),J=(()=>{class e{constructor(o,n,i,s){this.fb=o,this.auth=n,this.foroService=i,this.router=s,this.foroForm=this.fb.group({title:[,a.kI.required],desc:[,a.kI.required]})}get user(){return this.auth.user}ngOnInit(){}onCrear(){const{title:o,desc:n}=this.foroForm.value;this.newForo={title:o,desc:n,creado_por:this.user.id},this.foroForm.valid?this.foroService.addForo(this.newForo).subscribe(s=>{s.ok?(l().fire("Listo!","Se agrego correctamente el foro!","success"),setTimeout(()=>{this.router.navigateByUrl("/foro/busqueda")},1e3)):l().fire("Error!","Error al agregar el foro!","error")}):l().fire("Error!","Complete todos los campos!","error")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(a.qu),t.Y36(g.e),t.Y36(f),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-foro"]],decls:13,vars:1,consts:[[1,"container"],[3,"formGroup"],[1,"title"],["for","title"],["type","text","formControlName","title",1,"form-control"],[1,"desc"],["for","desc"],["rows","5","formControlName","desc",1,"form-control"],[1,"add"],[1,"btn","btn-primary",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t.TgZ(2,"div",2),t.TgZ(3,"label",3),t._uU(4,"Titulo"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"label",6),t._uU(8,"Descripcion"),t.qZA(),t._UZ(9,"textarea",7),t.qZA(),t.TgZ(10,"div",8),t.TgZ(11,"button",9),t.NdJ("click",function(){return n.onCrear()}),t._uU(12,"Crear foro"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(1),t.Q6J("formGroup",n.foroForm))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],styles:["body[_ngcontent-%COMP%]{margin:0 auto;font-family:Helvetica;font-weight:500}.hide[_ngcontent-%COMP%]{display:none}.btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#020024 0%,#4f77fa 0%,#5964f1 50%,rgba(51,103,244,.9444152661) 100%)}.container[_ngcontent-%COMP%]{max-width:768px;margin:30px auto;background:linear-gradient(90deg,#020024 0%,#f0f0f0 0%,#e4e1e1 50%,rgba(236,236,236,.9444152661) 100%);border-radius:5px;padding:20px}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{margin-bottom:10px}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}"]}),e})(),m=(()=>{class e{constructor(o,n){this.authService=o,this.router=n}get user(){return this.authService.user}canActivate(){return 2!=this.user.tipo_user||(this.router.navigateByUrl("/foro/busqueda"),!1)}canLoad(){return 2!=this.user.tipo_user||(this.router.navigateByUrl("/foro/busqueda"),!1)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(g.e),t.LFG(u.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const S=[{path:"",component:h.C,children:[{path:"busqueda",component:T},{path:"info/:id",component:I},{path:"agregar",component:J,canActivate:[m],canLoad:[m]},{path:"**",redirectTo:"busqueda"}]}];let w=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(S)],u.Bz]}),e})(),L=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,w,a.u5,a.UX]]}),e})()}}]);