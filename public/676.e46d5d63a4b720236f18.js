"use strict";(self.webpackChunkproyecto_final=self.webpackChunkproyecto_final||[]).push([[676],{1676:(k,p,g)=>{g.r(p),g.d(p,{PerfilModule:()=>J});var f=g(8583),_=g(8663),m=g(8239),a=g(665),d=g(8259),c=g.n(d),n=g(639),C=g(7556);function M(t,i){if(1&t&&n._UZ(0,"img",24),2&t){const e=n.oxw();n.s9C("src",e.user.img,n.LSH)}}function P(t,i){1&t&&n._UZ(0,"img",25)}function O(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){return n.CHM(e),n.oxw().onEditar()}),n._uU(1," Editar "),n.qZA()}}function Z(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){return n.CHM(e),n.oxw().onGuardarInfo()}),n._uU(1," Guardar "),n.qZA()}}function h(t,i){if(1&t&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&t){const e=n.oxw();n.xp6(1),n.Oqu(e.user.name)}}function b(t,i){1&t&&n._UZ(0,"input",26)}function x(t,i){if(1&t&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&t){const e=n.oxw();n.xp6(1),n.Oqu(e.user.email)}}function T(t,i){1&t&&n._UZ(0,"input",27)}function w(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){return n.CHM(e),n.oxw().onPassword()}),n._uU(1," Cambiar password "),n.qZA()}}function v(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){return n.CHM(e),n.oxw().onGuardarPass()}),n._uU(1," Guardar "),n.qZA()}}function y(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){return n.CHM(e),n.oxw().onPassword()}),n._uU(1,"Cancelar"),n.qZA()}}function A(t,i){1&t&&(n.TgZ(0,"div",28),n.TgZ(1,"label",29),n._uU(2,"Password actual"),n.qZA(),n._UZ(3,"input",30),n.qZA())}function q(t,i){1&t&&(n.TgZ(0,"div",31),n.TgZ(1,"label",32),n._uU(2,"Password nueva"),n.qZA(),n._UZ(3,"input",33),n.qZA())}let F=(()=>{class t{constructor(e,o){this.auth=e,this.fb=o,this.userForm=this.fb.group({name:[this.user.name,[a.kI.required]],email:[this.user.email,[a.kI.required,a.kI.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]],password:[],nuevapassword:[,a.kI.minLength(6)]}),this.toggleForm=!1,this.togglePassword=!1,this.getBase64=r=>new Promise((s,l)=>{var u=new FileReader;u.readAsDataURL(r),u.onload=function(){s({img:u.result})},u.onerror=function(E){l({error:E})}})}get user(){return this.auth.user}getTipo(){return 1==this.user.tipo_user?"Egresado":2==this.user.tipo_user?"Empresario":3==this.user.tipo_user?"Estudiante":null}ngOnInit(){}onEditar(){this.toggleForm=!this.toggleForm}onPassword(){this.togglePassword=!this.togglePassword}onGuardarInfo(){var e=this;return(0,m.Z)(function*(){const{name:o,email:r}=e.userForm.value;if(e.userForm.get("email").valid&&e.userForm.get("name").valid){const s=Object.assign({},e.user);s.email=r,s.name=o,yield e.auth.editarUsuario(s).subscribe(l=>{l.ok?(e.auth.user=s,c().fire("Listo!","Usuario actualizado con exito!","success")):c().fire("Error!","Error editando los datos!","error")}),e.onEditar()}else c().fire("Error!","Los datos no son validos!","error")})()}onGuardarPass(){var e=this;return(0,m.Z)(function*(){const{password:o,nuevapassword:r}=e.userForm.value;if(o===e.user.password)if(null===r||r.length<6)c().fire("Error!","La password nueva no es valida!","error");else{const s=Object.assign({},e.user);s.password=r,yield e.auth.editarUsuario(s).subscribe(l=>{l.ok?(e.auth.user=s,c().fire("Listo!","Password cambiada con exito!","success")):c().fire("Error!","Error editando los datos!","error")}),e.onPassword()}else c().fire("Error!","La password no es la actual!","error")})()}capturar(e){var o=this;return(0,m.Z)(function*(){yield o.getBase64(e.target.files[0]).then(r=>{r.img&&(o.img=r.img)})})()}guardarFoto(){this.img?this.auth.agregarFoto(this.user.id,this.img).subscribe(e=>{this.auth.user.img=this.img,c().fire("Listo!","Foto actualizada con exito!","success")}):c().fire("Error!","No has seleccionado ninguna imagen!","error")}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(C.e),n.Y36(a.qu))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-miperfil"]],decls:41,vars:17,consts:[[1,"main","mt-3"],[1,"perfilcontainer"],[1,"perfil"],["alt","img",3,"src",4,"ngIf"],["src","assets/user.jpg","alt","img",4,"ngIf"],[1,"info"],[1,"title"],["class","btn btn-primary",3,"click",4,"ngIf"],[3,"formGroup"],[1,"name"],["for","name"],[4,"ngIf"],["class","form-control","type","text","formControlName","name",4,"ngIf"],[1,"email"],["for","email"],["class","form-control","type","text","formControlName","email",4,"ngIf"],[1,"foto"],["for","foto"],["type","file",1,"form-control",3,"change"],[1,"btn","btn-primary",3,"click"],[1,"password"],[1,"btnspw"],["class","antigua",4,"ngIf"],["class","nueva",4,"ngIf"],["alt","img",3,"src"],["src","assets/user.jpg","alt","img"],["type","text","formControlName","name",1,"form-control"],["type","text","formControlName","email",1,"form-control"],[1,"antigua"],["for","antigua"],["type","password","formControlName","password",1,"form-control"],[1,"nueva"],["for","nueva"],["type","password","formControlName","nuevapassword",1,"form-control"]],template:function(e,o){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"p"),n._uU(4),n.qZA(),n.YNc(5,M,1,1,"img",3),n.YNc(6,P,1,0,"img",4),n.TgZ(7,"p"),n._uU(8),n.qZA(),n.TgZ(9,"p"),n._uU(10),n.qZA(),n.qZA(),n.qZA(),n.TgZ(11,"div",5),n.TgZ(12,"div",6),n.TgZ(13,"h3"),n._uU(14,"Informacion"),n.qZA(),n.YNc(15,O,2,0,"button",7),n.YNc(16,Z,2,0,"button",7),n.qZA(),n.TgZ(17,"form",8),n.TgZ(18,"div",9),n.TgZ(19,"label",10),n._uU(20,"Nombre"),n.qZA(),n.YNc(21,h,2,1,"span",11),n.YNc(22,b,1,0,"input",12),n.qZA(),n.TgZ(23,"div",13),n.TgZ(24,"label",14),n._uU(25,"Email"),n.qZA(),n.YNc(26,x,2,1,"span",11),n.YNc(27,T,1,0,"input",15),n.qZA(),n.TgZ(28,"div",16),n.TgZ(29,"label",17),n._uU(30,"Cambiar foto"),n.qZA(),n.TgZ(31,"input",18),n.NdJ("change",function(s){return o.capturar(s)}),n.qZA(),n.TgZ(32,"button",19),n.NdJ("click",function(){return o.guardarFoto()}),n._uU(33,"Guardar"),n.qZA(),n.qZA(),n.TgZ(34,"div",20),n.YNc(35,w,2,0,"button",7),n.TgZ(36,"div",21),n.YNc(37,v,2,0,"button",7),n.YNc(38,y,2,0,"button",7),n.qZA(),n.YNc(39,A,4,0,"div",22),n.YNc(40,q,4,0,"div",23),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.Oqu(o.user.name),n.xp6(1),n.Q6J("ngIf",o.user.img),n.xp6(1),n.Q6J("ngIf",!o.user.img),n.xp6(2),n.Oqu(o.user.email),n.xp6(2),n.Oqu(o.getTipo()),n.xp6(5),n.Q6J("ngIf",!o.toggleForm),n.xp6(1),n.Q6J("ngIf",o.toggleForm),n.xp6(1),n.Q6J("formGroup",o.userForm),n.xp6(4),n.Q6J("ngIf",!o.toggleForm),n.xp6(1),n.Q6J("ngIf",o.toggleForm),n.xp6(4),n.Q6J("ngIf",!o.toggleForm),n.xp6(1),n.Q6J("ngIf",o.toggleForm),n.xp6(8),n.Q6J("ngIf",!o.togglePassword),n.xp6(2),n.Q6J("ngIf",o.togglePassword),n.xp6(1),n.Q6J("ngIf",o.togglePassword),n.xp6(1),n.Q6J("ngIf",o.togglePassword),n.xp6(1),n.Q6J("ngIf",o.togglePassword))},directives:[f.O5,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],styles:["body[_ngcontent-%COMP%]{margin:0 auto;font-family:Helvetica;font-weight:500}.hide[_ngcontent-%COMP%]{display:none}.btn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#020024 0%,#4f77fa 0%,#5964f1 50%,rgba(51,103,244,.9444152661) 100%)}.main[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;height:100vh;max-width:1200px;margin:0 auto}.main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .perfil[_ngcontent-%COMP%]{background:linear-gradient(90deg,#020024 0%,#f0f0f0 0%,#e4e1e1 50%,rgba(236,236,236,.9444152661) 100%);margin-right:50px;border-radius:10px;padding:15px;display:flex;flex-direction:column;height:60%}.main[_ngcontent-%COMP%]   .perfil[_ngcontent-%COMP%]{height:50%;display:flex;flex-direction:column;align-items:center}.main[_ngcontent-%COMP%]   .perfil[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:20px;width:250px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:50px;display:grid;grid-template-columns:1fr 3fr 1fr;justify-items:center}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:500;font-size:36px;grid-column:2/3}.main[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 5fr 2fr;margin-bottom:20px}.main[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:95%}.main[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{grid-column:2/3}.main[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{grid-column:3/4}.main[_ngcontent-%COMP%]   .foto[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{grid-column:4/5}.main[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{grid-column:2/3}.main[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-column:3/4}.main[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{margin-top:100px;text-align:center}.main[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .antigua[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .nueva[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:10px;display:grid;grid-template-columns:1fr 2fr 5fr 2fr}.main[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .antigua[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .nueva[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{grid-column:2/3}.main[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .antigua[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .nueva[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{grid-column:3/4}.main[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:60%;background:linear-gradient(90deg,#020024 0%,#4f77fa 0%,#5964f1 50%,rgba(51,103,244,.9444152661) 100%)}.main[_ngcontent-%COMP%]   .btnspw[_ngcontent-%COMP%]{display:grid;grid-template-columns:4fr 1fr;justify-items:center;align-items:center}"]}),t})();const N=[{path:"",component:g(2359).C,children:[{path:"miperfil",component:F},{path:"**",redirectTo:"miperfil"}]}];let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[_.Bz.forChild(N)],_.Bz]}),t})(),J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[f.ez,U,a.UX]]}),t})()}}]);